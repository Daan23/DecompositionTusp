package mspInstance;

import java.util.ArrayList;
/**
 * Contains the arrival and departure time. 
 * Current implementation does not contain train units. 
 * @author daan.vandenheuvel
 *
 */
public class Train {
	private int releaseDate;  
	private int dueDate; 
	private int length; 
	private ArrayList<Task> tasks;
	private String name;
	
	private Train() {
		tasks = new ArrayList<Task>(); 
	}

	public Train(String name, int length) {
		this(); 
		this.name = name;
		this.length = length; 
	}

	public int getLength() {
		return length;
	}

	public void setLength(int length) {
		this.length = length;
	}
	
	public int getReleaseDate() {
		return releaseDate;
	}

	public void setReleaseDate(int release_date) {
		this.releaseDate = release_date;
	}

	public int getDueDate() {
		return dueDate;
	}

	public void setDueDate(int due_date) {
		this.dueDate = due_date;
	}

	public ArrayList<Task> getTasks() {
		return tasks;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}
	
	public String toString() {
		StringBuilder sb = new StringBuilder(); 
		sb.append(this.name + ":,\t l=" + this.length + ",\t release=" + this.releaseDate + ",\t due= " + this.dueDate);
		sb.append(",\t tasks=["); 
		if(0 != this.tasks.size()) {
			sb.append(this.tasks.get(0).toString()); 
		}
		for(int i=1; i<this.tasks.size(); i++) {
			sb.append(", " + this.tasks.get(i).toString());
		}
		sb.append("]"); 
		//return sb.toString();
		return "Train " + this.name; 
	}

	public int nofTasks() {
		return this.tasks.size();
	}

	public Task getTask(int index) {
		return this.tasks.get(index);
	}

	public void addTask(ArrayList<Task> tasks) {
		for(Task task : tasks) {
			this.addTask(task); 
		}
	}

	public void addTask(Task task) {
		task.setTrain(this); 
		this.tasks.add(task); 
	}

	public ArrayList<Precedence> getPrecedences() {
		ArrayList<Precedence> list = new ArrayList<>(); 
		for(Task t : this.tasks) {
			list.addAll(t.getPrecedences()); 
		}
		return list;
	}
}
